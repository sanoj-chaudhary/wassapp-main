{"ast":null,"code":"import _toConsumableArray from \"D:\\\\sanojproject\\\\c-chat-master\\\\c-chat-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"D:\\\\sanojproject\\\\c-chat-master\\\\c-chat-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\sanojproject\\\\c-chat-master\\\\c-chat-master\\\\src\\\\component\\\\chat\\\\Chat.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport socketIo from \"socket.io-client\";\nimport \"./Chat.css\";\nimport sendLogo from \"../../images/send.png\";\nimport Message from \"../Message/Message\";\nimport ReactScrollToBottom from \"react-scroll-to-bottom\";\nimport closeIcon from \"../../images/closeIcon.png\";\nvar ENDPOINT = 'http://localhost:4500';\nvar socket;\nvar user;\n\nvar Chat = function Chat() {\n  var navigate = useNavigate();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      id = _useState2[0],\n      setid = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      messages = _useState4[0],\n      setMessages = _useState4[1];\n\n  var send = function send() {\n    var message = document.getElementById('chatInput').value;\n\n    if (message) {\n      socket.emit('message', {\n        message: message,\n        id: id\n      });\n    }\n\n    document.getElementById('chatInput').value = \"\";\n  }; // console.log(messages);\n\n\n  useEffect(function () {\n    user = localStorage.getItem('user');\n\n    if (!user) {\n      navigate(\"/\");\n    }\n\n    socket = socketIo(ENDPOINT, {\n      transports: ['websocket']\n    });\n    socket.on('connect', function () {\n      // alert('Connected');\n      setid(socket.id);\n    }); // console.log(socket);\n\n    socket.emit('joined', {\n      user: user\n    });\n    socket.on('welcome', function (data) {\n      setMessages([].concat(_toConsumableArray(messages), [data])); // console.log(data.user, data.message);\n    });\n    socket.on('userJoined', function (data) {\n      setMessages([].concat(_toConsumableArray(messages), [data])); // console.log(data.user, data.message);\n    });\n    socket.on('leave', function (data) {\n      setMessages([].concat(_toConsumableArray(messages), [data])); // console.log(data.user, data.message)\n    });\n    return function () {\n      socket.emit('disconnected');\n      socket.off();\n    };\n  }, []);\n  useEffect(function () {\n    if (!user) {\n      navigate(\"/\");\n    }\n\n    socket.on('sendMessage', function (data) {\n      setMessages([].concat(_toConsumableArray(messages), [data])); // console.log(data.user, data.message, data.id);\n    });\n    return function () {\n      socket.off();\n    };\n  }, [messages]);\n\n  var logout = function logout() {\n    localStorage.removeItem(\"user\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chatPage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chatContainer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, \"wassapp\"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\",\n    onClick: logout,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 51\n    }\n  }, \"Logout\"), \" \")), /*#__PURE__*/React.createElement(ReactScrollToBottom, {\n    className: \"chatBox\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, messages.map(function (item, i) {\n    return /*#__PURE__*/React.createElement(Message, {\n      user: item.id === id ? '' : item.user,\n      message: item.message,\n      classs: item.id === id ? 'right' : 'left',\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 48\n      }\n    });\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputBox\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onKeyPress: function onKeyPress(event) {\n      return event.key === 'Enter' ? send() : null;\n    },\n    type: \"text\",\n    id: \"chatInput\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: send,\n    className: \"sendBtn\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: sendLogo,\n    alt: \"Send\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 64\n    }\n  })))));\n};\n\nexport default Chat;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","socketIo","sendLogo","Message","ReactScrollToBottom","closeIcon","ENDPOINT","socket","user","Chat","navigate","id","setid","messages","setMessages","send","message","document","getElementById","value","emit","localStorage","getItem","transports","on","data","off","logout","removeItem","map","item","i","event","key"],"sources":["D:/sanojproject/c-chat-master/c-chat-master/src/component/chat/Chat.js"],"sourcesContent":["import React, { useEffect,useState } from 'react'\nimport { useNavigate } from \"react-router-dom\";\nimport socketIo from \"socket.io-client\";\n\nimport \"./Chat.css\";\nimport sendLogo from \"../../images/send.png\";\nimport Message from \"../Message/Message\";\nimport ReactScrollToBottom from \"react-scroll-to-bottom\";\nimport closeIcon from \"../../images/closeIcon.png\";\n\nconst ENDPOINT = 'http://localhost:4500';\nlet socket;\nlet user;\n\nconst Chat = () => {\n    const navigate = useNavigate();\n    const [id, setid] = useState(\"\");\n    const [messages, setMessages] = useState([])\n\n    const send = () => {\n        const message = document.getElementById('chatInput').value;\n        if(message){\n            socket.emit('message', { message, id });\n        }\n        \n        document.getElementById('chatInput').value = \"\";\n    }\n\n    // console.log(messages);\n    useEffect(() => {\n\n        user = localStorage.getItem('user');\n        if(!user){\n            navigate(\"/\")\n        }\n        socket = socketIo(ENDPOINT, { transports: ['websocket'] });\n\n        socket.on('connect', () => {\n            // alert('Connected');\n            setid(socket.id);\n\n        })\n        // console.log(socket);\n        socket.emit('joined', { user })\n\n        socket.on('welcome', (data) => {\n            setMessages([...messages, data]);\n            // console.log(data.user, data.message);\n        })\n\n        socket.on('userJoined', (data) => {\n            setMessages([...messages, data]);\n            // console.log(data.user, data.message);\n        })\n\n        socket.on('leave', (data) => {\n            setMessages([...messages, data]);\n            // console.log(data.user, data.message)\n        })\n\n        return () => {\n            socket.emit('disconnected');\n            socket.off();\n        }\n    }, [])\n\n    useEffect(() => {\n\n        if(!user){\n            navigate(\"/\")\n        }\n        socket.on('sendMessage', (data) => {\n            setMessages([...messages, data]);\n            // console.log(data.user, data.message, data.id);\n        })\n        return () => {\n            socket.off();\n        }\n    }, [messages])\n\n\n    const logout = ()=>{\n        localStorage.removeItem(\"user\");\n    }\n  return (\n    <div className=\"chatPage\">\n            <div className=\"chatContainer\">\n                <div className=\"header\">\n                    <h2>wassapp</h2>\n                    <a href=\"/\" onClick={logout}> <span>Logout</span> </a>\n                </div>\n                <ReactScrollToBottom className=\"chatBox\">\n                    {messages.map((item, i) => <Message user={item.id === id ? '' : item.user} message={item.message} classs={item.id === id ? 'right' : 'left'} />)}\n                </ReactScrollToBottom>\n                <div className=\"inputBox\">\n                    <input onKeyPress={(event) => event.key === 'Enter' ? send() : null} type=\"text\" id=\"chatInput\" />\n                    <button onClick={send} className=\"sendBtn\"><img src={sendLogo} alt=\"Send\" /></button>\n                </div>\n            </div>\n\n        </div>\n  )\n}\n\nexport default Chat"],"mappings":"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"},"metadata":{},"sourceType":"module"}